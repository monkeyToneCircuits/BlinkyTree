# BlinkyTree Configuration
# ATtiny85 Interactive Christmas Tree
#
# Copyright (c) 2025 monkeyToneCircuits
# Licensed under CC-BY-NC 4.0
# https://creativecommons.org/licenses/by-nc/4.0/
#
# This configuration file allows you to customize song parameters.
# After editing, commit changes and push to GitHub. The GitHub Action will automatically
# compile a new firmware hex file with your custom song selection.
#
# IMPORTANT: Song configuration is now OPTIONAL!
# - All .musicxml files in the songs/ folder are automatically included
# - If a song is NOT listed in the 'songs' section, it will use default values
# - Songs default to enabled=true, duty_cycle=75, speed=100, transpose=0
# - You can override any individual parameter (enabled, duty_cycle, speed, transpose)
# - Missing parameters will use the default values

# ============================================================================
# PROJECT INFORMATION
# ============================================================================
project:
  name: "BlinkyTree"
  version: "1.0.0"
  author: "Dschi"

# ============================================================================
# HARDWARE CONFIGURATION
# ============================================================================
# User-adjustable hardware behavior settings

hardware:
  # LED system
  led_brightness_default: 30     # Base LED brightness (10-100)
  candle_flicker_speed: 150      # Candle flicker rate in ms (50-500, lower=faster)
  candle_flicker_intensity: 70   # Flicker intensity percentage (20-100)
  
  # Audio system  
  audio_max_frequency: 4000      # Maximum audio frequency (Hz)
  audio_min_frequency: 100       # Minimum audio frequency (Hz)
  audio_default_volume: 128      # Default audio volume (0-255)
  song_cooldown: 3000           # Time between songs in ms (1000-10000)
  note_separation: 50           # Gap between notes in ms (0-200)
  startup_melody: false         # Play song at startup (true/false)
  
  # Sensor settings
  breath_sensitivity: 1          # Breath detection threshold (1-100, lower=more sensitive)
  sensor_update_rate: 5         # Sensor check interval in ms (1-50, lower=more responsive)

# ============================================================================
# SONG CONFIGURATION (OPTIONAL)
# ============================================================================
# All .musicxml files in the songs/ folder are automatically included when compiling.
# Use this section to customize specific songs or disable them.
#
# Default values (used when song is not listed here):
#   enabled: true        - Song will be included in rotation
#   duty_cycle: 75       - PWM duty cycle percentage (10-100%)
#   speed: 100           - Playback speed percentage (25-200%, 100% = original tempo)
#   transpose: 0         - Semitones to shift pitch (-12 to +12, 0 = original key)
#
# You can override any individual parameter. For example:
#   MySong:
#     speed: 120         - Only changes speed, other parameters use defaults
#
# To disable a song, set enabled: false
# To remove a song completely, delete its .musicxml file from the songs/ folder
#
# The song key must match the MusicXML filename (without .musicxml extension).
#
# EXAMPLES:
#   # Example 1: Song not listed here - uses all defaults (enabled, 75, 100, 0)
#   
#   # Example 2: Disable a specific song
#   MySong:
#     enabled: false
#   
#   # Example 3: Only change speed, rest uses defaults
#   AnotherSong:
#     speed: 120
#   
#   # Example 4: Full configuration
#   YetAnotherSong:
#     enabled: true
#     duty_cycle: 80
#     speed: 150
#     transpose: 5

songs:


  # Traditional German Christmas carol
  traditional-music-i-saw-three-ships-come-sailing-in:
    enabled: false
    duty_cycle: 75
    speed: 150
    transpose: 9

  # Traditional German Christmas carol
  Oh_Tannenbaum:
    enabled: true
    duty_cycle: 75
    speed: 150
    transpose: 9
    
  # Classic Christmas lullaby
  Stille_Nacht_ChipVersion:
    enabled: true
    duty_cycle: 75
    speed: 150
    transpose: 8
    
  # Upbeat Christmas favorite
  JINGLE_BELLS:
    enabled: true
    duty_cycle: 85
    speed: 180
    transpose: 6
    
  # Traditional Christmas carol
  The_First_Noel_Trumpet_only:
    enabled: true
    duty_cycle: 80
    speed: 140
    transpose: 8
    
  # German Christmas song "Kling, Gl√∂ckchen"
  Oh_du_frohliche:
    enabled: true
    duty_cycle: 85
    speed: 170
    transpose: 8
    
  # German Christmas carol "Kommet, ihr Hirten"
  kommet-ihr-hirten:
    enabled: true
    duty_cycle: 80
    speed: 160
    transpose: 4
    
  # German children's Christmas song
  Schneeflockchen_Weissrockchen:
    enabled: true
    duty_cycle: 75
    speed: 140
    transpose: 7

# ============================================================================
# FEATURE CONFIGURATION
# ============================================================================
features:
  # Lighting effect (only one can be active)
  candle_effect: true
  breathing_effect: false
  candle_effect_kranz: false
  
  # Sensor support
  microphone_sensor: true
  
  # Audio system
  audio_output: true
  
  # Advanced features
  eeprom_settings: true
  memory_optimization: true
  song_rotation: true

# ============================================================================
# LED FREQUENCY MAPPING
# ============================================================================
# Maps note frequencies to LED rings for audio-reactive lighting
# Frequencies are in Hz
led_mapping:
  LED_5ER:  # Lowest notes
    max_frequency: 216  # Up to E4
    
  LED_4ER:  # Low-mid notes
    min_frequency: 229  # F4
    max_frequency: 273  # GS4
    
  LED_3ER:  # Mid-high notes
    min_frequency: 290  # A4
    max_frequency: 326  # B4
    
  LED_1ER:  # Highest notes
    min_frequency: 344  # C5 and above

# ============================================================================
# ADVANCED CONFIGURATION
# ============================================================================
# Note: Most users won't need to modify these settings

# Time multiplexing for shared microphone/LED pin
timing:
  mic_read_interval_ms: 50
  led_update_interval_ms: 20

# Memory constraints (ATtiny85 has only 512 bytes RAM)
memory:
  max_melody_notes: 100  # Maximum notes per song
  stack_reserve: 128     # Reserved stack space
